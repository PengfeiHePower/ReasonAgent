{
    "reason": {
            "prompt_understand_template_1": "I will show you a question, please analyze its syntax structure and identify key components of this question. You need to decompose it as a tree structure so that you can solve from the leaf point. Please also provide the reason behind your analysis. \n\nQ: {q}\n",
            "prompt_understand_template_2": "I will show you a question, please decompose it as a tree structure so that you can solve from the leaf point. Please also provide the reason behind your analysis. \n\nQ: {q}\n",
            "prompt_understand_template_3": "I have a complex question that I need help analyzing. Please use syntax to decompose the question into smaller, simple, and specific sub-questions, avoiding ambiguity and complex sub-questions. Form them into a tree structure that can be solved systematically. Additionally, provide the reasoning behind each decomposition step. Ensure that the final output is a structured analysis that clearly shows the relationship between the sub-questions and the path to the final solution. Do not include the answer for questions. Only provide decompositions and reasons.\n\nQ: {q}\n",
            "prompt_understand_template":"Analyze the following problem step-by-step and provide detailed steps for the following:\n1.Identify Key Components: Determine the main elements of the problem.\n2.Relationship between Components: Explain how the key components are related to each other in a structured way.\n3.Clarify the Question: Restate the question in simpler terms to ensure full understanding.\n4.Determine the Scope: Define the boundaries of the problem to focus the analysis.\n5.Break into Sub-questions: Divide the main question into smaller, manageable sub-questions for detailed analysis.\n\nProblem: {q}\n",
            "prompt_understand_template_new": "Provide a thorough analysis of the problem by addressing the following:\n1.Identify Key Components: Identify the crucial elements and variables that play a significant role in this problem.\n2.Relationship between Components: Explain how the key components are related to each other in a structured way.\n3.Sub-Question Decomposition:Break down the problem into the following sub-questions, each focusing on a specific aspect necessary for understanding the solution:\nImplications for Solving the Problem:For each sub-question, describe how solving it helps address the main problem. Connect the insights from these sub-questions to the overall strategy needed to solve the main problem.\n\nQuestion: {q}\n",
            "prompt_step1_template": "Given the analysis, please show me the first step to solve this problem. This step does not need to solve the problem completely, but need to be clear and specific enough to execute and direct towards the final solution. You can use Wikipedia to search the information needed. Please also provide the reason for this step and make sure your reason supports your proposed steps.\n\nStructure analysis: {analysis}\n",
            "prompt_action_template_1": "I would like to push this step:{step} with help of WikiPedia. Show me keywords that I could search for.\n",
            "prompt_step_seq_template": "Given the structure analysis, previous steps and retrieved information, show me the thought of the next step. This step does not need to solve the problem completely, but need to be clear and direct towards the final solution. If necessary you can call retrieval agents to retrieve external knowledge. If no further step is needed, please conclude the answer. Please also provide the reason for this step and make sure your reason supports your proposed step.\n\nStructure analysis: {analysis}\nCurrent step: {step}\nRetrieved information: {info}\n",
            "prompt_step_seq_template_new": "Problem statement:\n{question}\nProblem analysis:\n{analysis}\nPrevious thoughts:\n{thought}\nRetrieved knowledge:\n{knowledge}\nTask:\nUsing the provided analysis, previous thoughts, and retrieved knowledge, complete the following:\n1.Reflect on the Current Situation:\n- Assess the adequacy of the current information. \n- Determine if additional information is needed to proceed effectively.\n- If external data is required, specify the query for retrieval and provide reason.\n- Identify any gaps or inconsistencies in reasoning or available data.\n2.Propose New Thoughts:\n- Critically analyze the current situation, and determine the logical next thought or action. \n- Carefully execuate the thought and action. Conclude the answer if it is ready. \nInstruction: 1. Ensure your output seamlessly integrates the problem analysis, sub-questions, and implications for solving the problem. 2. Carefully consider the retrieved knowledge, including Retrieval entity and Extracted info. 3. Build logically on previous thoughts, ensuring that the next thought is coherent, non-repetitive, and aligned with the ongoing reasoning process.",
            "prompt_step_seq_template_math": "Problem statement:\n{question}\nProblem analysis:\n{analysis}\nPrevious thoughts:\n{thought}\nRetrieved knowledge:\n{knowledge}\nTask:\nUsing the provided problem analysis, previous thoughts, and retrieved knowledge, your task is to critically reason through the solution while ensuring efficiency, logical consistency, and non-redundancy.\n1.Reflect on the Current Situation:\n- External Data Check: Is the available information sufficient? If yes, proceed without requesting extra data. If no, specify the exact query for the Retrieval Agent and explain how the data will assist in solving the problem. \n- Inconsistency Check: Are there any logical inconsistencies or errors in the current reasoning step? If yes, identify the flaw and correct it. If no, confirm that the reasoning is consistent and proceed.\n- Error Identification and Correction: Check for errors (Mathematical mistakes, Logical flaws, Overcomplication). Correct the errors if exists and ensure each step follows logically and doesn't repeat. \n2.Propose and Execute New Thoughts:\n- Reason the Next Step: Briefly assess the current state of reasoning. Propose the next logical step if necessary, but only if it introduces a new action. Avoid repeating previous actions or explanations. \n- Execute the Step: Perform the next step immediately. Do not describe what you are going to doâ€”just execute it. If the solution is clear, provide the final answer.\n- Conclude or Move Forward: If the solution is complete, conclude. If more steps are needed, proceed to the next logical action without repeating tasks or explanations. \nInstruction: 1. Ensure your reasoning seamlessly incorporates the problem analysis, sub-questions, and implications for solving the overall problem. Each step should build logically on the previous one. 2. Carefully utilize the retrieved knowledge, including Retrieval entity and Extracted info. 3. Build logically on previous thoughts, ensuring that the next thought is coherent, non-repetitive, and necessary for solving the problem."
        },
    "refine":{
        "prompt_evaluation_template" : "Given the original question and a structure analysis, please determine if the analysis is correct. If not, please provide reasons and corresponding suggestions to correct it.\n\nOriginal question: {q}Structure analysis: {analysis}\n",
        "prompt_refine_structure_template" : "Given the original question, the original structure analysis, and the suggestions for refinement, please refine the structure analysis accordingly.\n\nOriginal question: {q}\nOriginal structure analysis: {analysis}\nSuggestions for refinement: {suggestions}\n",
        "prompt_action_refine_template" : "Given the current step, current action and retrieved information, evaluate the action. Please refine the action if it can not fullfill requirements of the current step. Make sure the refined action adheres with the step.\n\nStep: {step}\nAction: {action}\nRetrieved information: {info}\n\nPlease respond with a structured format strictly:\nEvaluation:\nRefined action: [State refined step or 'No refinement' if no need for refinement]",
        "prompt_step_refine_template" : "Given the structure analysis, current step and corresponding retrieved information, evaluate the current step. Please make sure the current step adheres with the structure analysis, and refine the step if it can not direct toward the final solution. Please prevent factual errors utilizing the retrieved information. \n\nStructure analysis: {analysis}\nStep: {step}\nRetrieved information: {info}\n\nPlease respond with a structured format strictly:\nEvaluation:\nRefined step: [State refined step or 'No refinement' if no need for refinement]"
    },
    "retrieval":{
        "prompt_info_extraction_template" : "Given the retrieved information, extract most revelant information related to the step. If it fails to retrieve revelant information related to the step, please output suggestions such as similar entities.\n\nStep: {step}\ninfo: {info}\n\nExtracted info:",
        "prompt_retrieval_template_1" : "Given the actions, decide one keyword for retrieval, and decide what date sources to retrieve from. Please provide the reason. \n\nAction: {action}\nCandidate sources:{sources}\n\nPlease respond with a structured format strictly and only provide one Retrieval key. Do not use ordinal numbers.",
        "prompt_retrieval_template" : "\n\nRetrieval requirement: {Retrieval_info}\nCandidate sources:{sources}\n\nAnalyze the retrieval requirement, identify entities for which information needs to be gathered. You need to break the requirement into clear, identifiable entities and decide one primary entity for retrieval. You do not need to fullfill all the requirements but provide accurate and useful information for the requirement. Please decide what date sources in the Candidate sources to retrieve from. Please provide the reason. Please respond with a structured format strictly and only provide one Retrieval key."
    }
}